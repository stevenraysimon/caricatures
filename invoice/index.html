<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-86V1CSS5RL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-86V1CSS5RL');
    </script>
    <meta charset="UTF-8">
    <meta name="description"
        content="Caricature artist Steven Simon, based in Houston, Texas. Hire Steven for live event caricatures at parties, weddings, festivals, and more. Bring your event to life with personalized and entertaining caricature drawings.">
    <meta name="keywords" content="caricature, custom caricature, caricature art, personalized caricature">
    <meta name="robots" content="index, follow">
    <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico" />
    <title>Caricatures by Steven Simon || Invoice</title>
    <meta property="og:title" content="Caricatures by Steven Simon">
    <meta property="og:description" content="Discover unique and personalized caricatures for any occasion!">
    <meta property="og:image" content="https://stevenraysimon.github.io/caricatures/images/logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/main.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <link rel="stylesheet" href="../css/font-awesome.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600,700&display=swap" rel="stylesheet">
    <audio id="pop" preload="auto">
        <source src="../sounds/smallPop.wav">
        </source>
    </audio>

    <audio id="click" preload="auto">
        <source src="../sounds/click.wav">
        </source>
    </audio>

    <noscript>
        <link rel="stylesheet" href="css/noscript.css" type="text/css" />
    </noscript>

    <!-- Change this line in your HTML head section -->
    <script type="module" src="../js/web-components.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.7.0/webcomponents-loader.js"></script>
    <script type="text/javascript" src="../js/main.js"></script>
    <style type="text/css">
        /* Client specific styles */
        #outlook a {
            padding: 0;
        }

        .ReadMsgBody,
        .ExternalClass {
            width: 100%;
        }

        .ExternalClass,
        .ExternalClass p,
        .ExternalClass span,
        .ExternalClass font,
        .ExternalClass td,
        .ExternalClass div {
            line-height: 100%;
        }

        body,
        table,
        td,
        a {
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        table,
        td {
            mso-table-lspace: 0pt;
            mso-table-rspace: 0pt;
        }

        img {
            -ms-interpolation-mode: bicubic;
        }

        /* Reset styles */
        body {
            margin: 0;
            padding: 0;
        }

        img {
            border: 0;
            height: auto;
            line-height: 100%;
            outline: none;
            text-decoration: none;
        }

        table {
            border-collapse: collapse !important;
        }

        body {
            height: 100% !important;
            margin: 0;
            padding: 0;
            width: 100% !important;
        }

        /* Mobile Styles */
        @media screen and (max-width: 525px) {

            /* Full Width Tables */
            table[class="responsive-table"] {
                width: 100% !important;
            }

            /* Full Width Images */
            img[class="img-max"] {
                max-width: 100% !important;
                height: auto !important;

            }

        }

        #copyMe {
            display: block;
            position: relative;
            z-index: 0;
            display: none;
            background-color: #fff;
        }



        #formInput {
            display: block;
            position: absolute;
            background-color: white;
            width: 100%;
            height: 100%;
            margin: auto;
            text-align: center;
            font-family: Verdana, sans-serif;
            font-weight: 700;
            font-size: 1em;
            color: #555;
            line-height: 27px;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale;
            z-index: 888;
        }

        #formInput textarea {
            width: 100%;
            height: 300px;
            margin: 0 auto;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            border: 1px #DDD dotted;
            font-family: Verdana, sans-serif;
            font-weight: 300;
            font-size: 1em;
            color: #555;
            line-height: 27px;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale;
            resize: none;
            outline: 0;
        }

        #hint {
            font-family: Verdana, sans-serif;
            font-weight: 300;
            font-size: 1em;
            color: #AAA;
            line-height: 27px;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale;
            font-style: italic;
        }

        .inputField {
            font-family: Verdana, sans-serif;
            font-weight: 300;
            font-size: 1em;
            color: #555;
            line-height: 27px;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale;
            width: 100%;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            border: 0;
            outline: 0;
        }

        ::placeholder {
            color: #CCC;
        }

        .formText {
            float: left;
        }

        form {
            max-width: 600px;
            background-color: white;
            margin: auto;
            padding: 0 20px 0 20px;
        }

        #submito,
        #copyo {
            background-color: white;
            border: 1px #222 solid;
            color: #222;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
            font-size: 16px;
            font-family: Verdana, sans-serif;
            outline: 0;
            margin-bottom: 40px;
            -webkit-appearance: none;
            border-radius: 0px;
        }

        #copyo {
            margin: auto;
            display: block;
            margin-bottom: 40px;
        }

        #submito:hover,
        #copyo:hover {
            background-color: #222;
            color: white;
            cursor: pointer;
            outline: 0;
        }

        #submito:active,
        #copyo:active {
            background-color: #000;
            outline: 0;
        }

        .rawLogo {
            font-family: 'Montserrat', Verdana, sans-serif;
            font-size: 1.5em;
            color: #222;
            line-height: 27px;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale;
            text-align: center;
            text-transform: lowercase;
            font-weight: 500;
        }

        #hero {
            min-height: unset;
        }

        .rawLogo:hover {
            color: #444;
            transition: 0.6s;
        }

        .rawLogo:active {
            color: #000;
            transition: 0s;
        }

        @media (prefers-color-scheme: dark) {
            .dark-theme {
                display: block !important;
            }

            .light-theme {
                display: none !important;
            }
        }

        .invoice,
        .menu-icon {
            display: none;
        }

        #printButton {
            display: block;
            margin: auto;
            margin-bottom: 30px;
        }

        @media print {
            #printButton {
                display: none;
            }
        }

        /* Media query for smaller screen sizes (e.g., mobile devices) */
        @media screen and (max-width: 768px) {
            .invoice #sum {
                font-size: 5rem;
                /* Adjusted font size for smaller screens */
            }
        }

        /* Discount line styling */
        .discount-line {
            color: #777777;
            /* Changed from red (#FF0000) to gray (#777777) */
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.1.slim.min.js"
        integrity="sha256-w8CvhFs7iHNVUtnSP0YKEg00p9Ih13rlL9zGqvLdePA=" crossorigin="anonymous"></script>
</head>

<body>
    <div id="formInput">
        <form>
            <p class="formText">Event Name:</p>
            <input id="eventName" type="text" placeholder="Event Name" class="inputField"><br>
            <p class="formText">Event Date:</p>
            <input id="eventDate" type="date" placeholder="Event Date" class="inputField" value=""><br>
            <p class="formText">Start Time:</p>
            <input id="startTime" type="time" placeholder="Start Time" class="inputField"><br>
            <p class="formText">Hours:</p>
            <input id="hours" type="number" placeholder="Hours" class="inputField"><br>
            <p class="formText">Discount Label:</p>
            <input id="discountLabel" type="text" placeholder="Discount" class="inputField"><br>
            <p class="formText">Discount ($):</p>
            <input id="discount" type="number" placeholder="Discount Amount" class="inputField" value="0"><br>
            <p class="formText">Invoice Number:</p>
            <input id="invoiceNum" type="number" placeholder="Invoice Number" class="inputField"><br>
        </form>
        <input id="submito" type="submit" value="Submit">
    </div>

    <div class="menu-icon">
        <div class="bar" id="barOne"></div>
        <div class="bar" id="barTwo"></div>
    </div>
    <!--menu icon-->
    <div class="blackOverlay"></div>
    <main-nav></main-nav>
    <!-- Index -->
    <a name="jump-to-top"></a>
    <div id="hero">
        <div id="fade">
            <div id="pattern">
                <div class="wrapper feature">
                    <header>
                        <h1 class="hiddenTags">Caricatures by Steven Simon</h1>
                        <a href="https://stevenraysimon.github.io/caricatures/"><img src="../images/logo.png"
                                title="Caricatures by Steven Simon" alt="Caricatures by Steven Simon"
                                class="logo" /></a>
                    </header>
                </div>
                <!--wrapper-->
            </div>
            <!--pattern-->
        </div>
        <!--fade -->
    </div>
    <!--Hero -->

    <!-- Invoice Items -->
    <div class="invoice">
        <div class="row">
            <div class="content left">
                <p>Steven Simon<br>17519 Monsoon Ct.<br>Crosby, Texas 77532<br>346.373.0801</p>
            </div>
            <div class="content right">
                <p>Invoice # <span class="invoiceNumber" id="invoiceNumber">0000</span><br><strong>Issued:
                    </strong><span class="issueDate">November 27,
                        2023</span><br><strong>Due: </strong><span class="dueDate">December 9, 2023</span></p>
            </div>
        </div>
        <div class="row end">
            <div class="content right">
                <h1 id="sum">$<span class="total">300</span></h1>
            </div>
        </div>
        <div class="row gray">
            <p><a href="mailto:stevenraysimon@gmail.com" target="_top"
                    title="stevenraysimon@gmail.com">stevenraysimon@gmail.com</a></p>
        </div>
        <div class="row">
            <h3>Items:</h3>
        </div>
        <div class="gray event">
            <div class="row">
                <div class="content left">
                    <p><span class="eventName">Event Name</span></p>
                </div>
                <div class="content right">
                    <p>$<span class="sum">300</span></p>
                </div>
            </div>
            <div class="row">
                <div class="content left">
                    <p><span class="hours">3</span>x$100<br>Caricatures from <span class="startTime">4:30pm</span> to
                        <span class="endTime">4:30pm</span> on <span class="eventDay">Tuesday</span><span
                            class="crossDaySpan" style="display: none;"> through <span
                                class="nextDay">Wednesday</span></span><br><span class="dueDate">December 12,
                            2023</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="row totals">
            <div class="content right">
                <p>Subtotal</p>
                <p class="discount-row" style="display: none;"><span id="discount-text">Discount</span></p>
                <p><strong>Total</strong></p>
            </div>
            <div class="content right">
                <p>$<span class="sum">300</span></p>
                <p class="discount-row" style="display: none;"><span class="discount-line">-$<span
                            class="discount-value">0</span></span></p>
                <p>$<span class="total">300</span></p>
            </div>
        </div>

        <button id="printButton">Print Invoice</button>
    </div> <!-- Closing invoice div that was missing -->

    <footer>
        <div class="wrapper footer">
            <p>Designed and developed by Steven Simon <span id="date">2023</span></p>
        </div>
        <!--Closing wrapper-->
    </footer>
    <!--Closing footer-->

    <!-- Script section here -->
    <script src="https://code.jquery.com/jquery-3.6.1.slim.min.js"
        integrity="sha256-w8CvhFs7iHNVUtnSP0YKEg00p9Ih13rlL9zGqvLdePA=" crossorigin="anonymous"></script>

    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function () {
            // Force event date to be empty on load
            setTimeout(() => {
                document.getElementById("eventDate").value = "";
            }, 0);

            // Cache DOM elements for better performance
            const elements = {
                // Form elements
                form: {
                    eventName: document.getElementById("eventName"),
                    eventDate: document.getElementById("eventDate"),
                    startTime: document.getElementById("startTime"),
                    hours: document.getElementById("hours"),
                    discountLabel: document.getElementById("discountLabel"),
                    discount: document.getElementById("discount"),
                    invoiceNum: document.getElementById("invoiceNum"),
                    submit: document.getElementById("submito")
                },
                // Output elements
                output: {
                    invoiceNumber: document.getElementById("invoiceNumber"),
                    eventName: document.querySelector(".eventName"),
                    startTime: document.querySelector(".startTime"),
                    endTime: document.querySelector(".endTime"),
                    hours: document.querySelector(".hours"),
                    discountText: document.getElementById("discount-text"),
                    discountValue: document.querySelector(".discount-value"),
                    discountRows: document.querySelectorAll(".discount-row"),
                    sums: document.querySelectorAll(".sum"),
                    totals: document.querySelectorAll(".total"),
                    issueDate: document.querySelector(".issueDate"),
                    dueDates: document.querySelectorAll(".dueDate"),
                    eventDays: document.querySelectorAll(".eventDay"),
                    crossDaySpan: document.querySelector(".crossDaySpan"),
                    nextDay: document.querySelector(".nextDay"),
                    formInput: document.getElementById("formInput"),
                    invoice: document.querySelector(".invoice"),
                    menuIcon: document.querySelector(".menu-icon"),
                    printButton: document.getElementById("printButton")
                }
            };

            // Constants
            const HOURLY_RATE = 100;
            const DAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

            // Add event listeners
            if (elements.form.submit) {
                elements.form.submit.addEventListener("click", handleFormSubmit);
                console.log("Submit button event listener added");
            } else {
                console.error("Submit button not found");
            }

            // Initialize date field with today's date
            const today = new Date();
            if (elements.form.eventDate) {
                elements.form.eventDate.valueAsDate = today;
            }

            function handleFormSubmit(event) {
                console.log("Submit button clicked");
                event.preventDefault();

                // Collect and validate form data
                const formData = collectFormData();
                if (!validateFormData(formData)) return;

                // Process invoice data
                const invoiceData = processInvoiceData(formData);

                // Update the UI
                updateInvoiceUI(invoiceData);

                // Show invoice and hide form
                showInvoice();

                // Set up the print button
                if (document.getElementById("printButton")) {
                    document.getElementById("printButton").addEventListener("click", () => window.print());
                }
            }

            /**
             * Collect form data into a structured object
             */
            function collectFormData() {
                return {
                    eventName: elements.form.eventName ? elements.form.eventName.value : "",
                    eventDate: elements.form.eventDate ? elements.form.eventDate.value : "",
                    startTime: elements.form.startTime ? elements.form.startTime.value : "",
                    hours: elements.form.hours ? parseFloat(elements.form.hours.value) : 0,
                    discountLabel: elements.form.discountLabel ? (elements.form.discountLabel.value || "Discount") : "Discount",
                    discount: elements.form.discount ? (parseFloat(elements.form.discount.value) || 0) : 0,
                    invoiceNum: elements.form.invoiceNum ? parseInt(elements.form.invoiceNum.value) : 0
                };
            }

            /**
             * Validate form data
             */
            function validateFormData(data) {
                // Validate invoice number
                if (isNaN(data.invoiceNum) || data.invoiceNum < 0) {
                    alert("Please enter a valid invoice number.");
                    return false;
                }

                // Validate hours and start time
                if (data.startTime.trim() === "" || isNaN(data.hours) || data.hours <= 0) {
                    alert("Please enter a valid start time and number of hours.");
                    return false;
                }

                // Validate event date
                if (!data.eventDate) {
                    alert("Please enter a valid event date.");
                    return false;
                }

                return true;
            }

            /**
             * Process form data into invoice data
             */
            function processInvoiceData(formData) {
                // Format invoice number
                const formattedInvoiceNum = formData.invoiceNum.toString().padStart(4, "0");

                // Calculate end time and check if it crosses midnight
                const timeResult = calculateEndTime(formData.startTime, formData.hours);
                const endTime = timeResult.endTime;
                const crossesDay = timeResult.crossesDay;

                // Calculate financial data
                const subtotal = formData.hours * HOURLY_RATE;
                let total = subtotal - formData.discount;
                if (total < 0) total = 0;

                // Calculate dates
                const currentDate = new Date();

                // Event date is EXACTLY the date selected by the user
                const eventDateObject = new Date(formData.eventDate + "T00:00:00"); // Use T00:00:00 to ensure we get the right day
                console.log("Original event date:", formData.eventDate);
                console.log("Event date object:", eventDateObject);

                // Create the next day date object for crossing midnight
                const nextDayObject = new Date(eventDateObject);
                nextDayObject.setDate(eventDateObject.getDate() + 1);
                console.log("Next day object:", nextDayObject);

                // Due date is now the same as the event date
                const dueDateObject = new Date(eventDateObject);

                return {
                    invoiceNumber: formattedInvoiceNum,
                    eventName: formData.eventName,
                    startTime: formatTime(formData.startTime),
                    endTime: formatTime(endTime),
                    hours: formData.hours,
                    subtotal: subtotal.toFixed(2),
                    discount: formData.discount,
                    discountLabel: formData.discountLabel,
                    total: total.toFixed(2),
                    issueDate: formatDate(currentDate),
                    dueDate: formatDate(dueDateObject),
                    eventDay: DAYS[eventDateObject.getDay()],
                    crossesDay: crossesDay,
                    nextDay: DAYS[nextDayObject.getDay()],
                    eventDate: formatDateMonthDay(eventDateObject),
                    nextDate: formatDateMonthDay(nextDayObject)
                };
            }

            /**
             * Update the UI with invoice data
             */
            function updateInvoiceUI(data) {
                console.log("Updating UI with data:", data);

                // Update basic invoice data
                if (elements.output.invoiceNumber) elements.output.invoiceNumber.textContent = data.invoiceNumber;
                if (elements.output.eventName) elements.output.eventName.textContent = data.eventName;
                if (elements.output.startTime) elements.output.startTime.textContent = data.startTime;
                if (elements.output.endTime) elements.output.endTime.textContent = data.endTime;
                if (elements.output.hours) elements.output.hours.textContent = data.hours;

                // Update financial data
                elements.output.sums.forEach(el => el.textContent = data.subtotal);
                elements.output.totals.forEach(el => el.textContent = data.total);

                // Handle discount display
                if (data.discount > 0) {
                    if (elements.output.discountText) elements.output.discountText.textContent = data.discountLabel;
                    if (elements.output.discountValue) elements.output.discountValue.textContent = data.discount.toFixed(2);
                    elements.output.discountRows.forEach(el => el.style.display = "block");
                } else {
                    elements.output.discountRows.forEach(el => el.style.display = "none");
                }

                // Update dates
                if (elements.output.issueDate) elements.output.issueDate.textContent = data.issueDate;
                elements.output.dueDates.forEach(el => el.textContent = data.dueDate);

                // Update event day with format "Sunday March 23"
                elements.output.eventDays.forEach(el => {
                    el.textContent = `${data.eventDay} ${data.eventDate}`;
                });

                // Handle day-crossing for overnight events
                if (data.crossesDay) {
                    if (elements.output.nextDay) elements.output.nextDay.textContent = `${data.nextDay} ${data.nextDate}`;
                    if (elements.output.crossDaySpan) elements.output.crossDaySpan.style.display = "inline";
                } else {
                    if (elements.output.crossDaySpan) elements.output.crossDaySpan.style.display = "none";
                }
            }

            /**
             * Show the invoice and hide the form
             */
            function showInvoice() {
                if (elements.output.formInput) elements.output.formInput.style.display = 'none';
                if (elements.output.invoice) elements.output.invoice.style.display = 'block';
                if (elements.output.menuIcon) elements.output.menuIcon.style.display = 'block';
            }

            /**
             * Calculate the end time based on start time and hours
             * Returns end time and whether the time span crosses midnight
             */
            function calculateEndTime(startTime, hours) {
                const parts = startTime.split(":");
                let startHour = parseInt(parts[0]);
                let startMinute = parseInt(parts[1]);

                // Calculate end time
                let endHour = startHour + Math.floor(hours);
                let endMinute = startMinute + Math.round((hours % 1) * 60);

                // Handle minute overflow
                if (endMinute >= 60) {
                    endHour += 1;
                    endMinute -= 60;
                }

                // Check if time crosses midnight
                const crossesDay = endHour >= 24;

                // Handle 24-hour wrap
                if (endHour >= 24) {
                    endHour -= 24;
                }

                return {
                    endTime: `${endHour}:${endMinute < 10 ? '0' : ''}${endMinute}`,
                    crossesDay: crossesDay
                };
            }

            /**
             * Format time in AM/PM format
             */
            function formatTime(time) {
                const parts = time.split(":");
                let hour = parseInt(parts[0]);
                const minute = parts[1];

                // Determine AM/PM
                const period = hour >= 12 ? "pm" : "am";

                // Convert to 12-hour format
                if (hour > 12) {
                    hour -= 12;
                } else if (hour === 0) {
                    hour = 12; // 0:XX becomes 12:XX AM
                }

                return `${hour}:${minute}${period}`;
            }

            /**
             * Format date as "Month Day, Year"
             */
            function formatDate(date) {
                const options = { year: "numeric", month: "long", day: "numeric" };
                return date.toLocaleDateString("en-US", options);
            }

            /**
             * Format date as "Month Day" (e.g., "March 23")
             */
            function formatDateMonthDay(date) {
                const options = { month: "long", day: "numeric" };
                return date.toLocaleDateString("en-US", options);
            }

            // Log that the script has loaded successfully
            console.log("Invoice script loaded successfully");
        });
    </script>
</body>

</html>